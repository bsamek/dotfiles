# Use vi key bindings in copy mode
setw -g mode-keys vi

# Remap prefix from C-b to C-a
unbind C-b
set -g prefix C-a

# C-a a sends prefix to nested tmux sessions
bind a send-prefix

# Double-tap C-a to switch to last active window
bind C-a last-window

# Increase scrollback buffer
set -g history-limit 50000

# Forward terminal bell (e.g. Claude Code notifications) through tmux
set -g bell-action any
set -g visual-bell off

# Start window and pane numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Splits open in the current pane's directory
bind '"' split-window -v -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# Prevent programs from renaming windows
set-option -g allow-rename off

# Create new window (no name prompt)
bind c new-window

# Rename window starting with blank prompt
bind , command-prompt -p "rename window:" "rename-window '%%'"

# Reload config
bind r source-file ~/.tmux.conf \; display-message "Config reloaded"

# Host-specific status bar colors
set -g status-right " #h "
set -g status-style "bg=red,fg=black"
if-shell 'test "$(hostname -s)" = "Brians-MacBook-Air-2"' \
  'set -g status-style "bg=blue,fg=black"'
if-shell 'test "$(hostname -s)" = "Brians-Mac-mini"' \
  'set -g status-style "bg=green,fg=black"'
